<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="control">
    <input
      id="email"
      type="email"
      name="email"
      formControlName="email"
      autocomplete="on"
    />
    <label for="email">
      Email
      <p>you will need to confirm it</p>
    </label>
    @if(form.controls.email.dirty && form.controls.email.hasError('email')){
    <p class="control-error">Please enter valid email</p>
    } @if(form.controls.email.dirty &&
    form.controls.email.hasError('required')){
    <p class="control-error">Please enter email</p>
    }
  </div>
  <div class="control">
    <label for="username">
      Username
      <p>min. 3 characters</p>
    </label>
    <input
      id="username"
      type="text"
      name="username"
      formControlName="username"
      autocomplete="username"
    />
    @if(form.controls.username.invalid && form.controls.username.dirty &&
    form.controls.username.hasError('required')){
    <p class="control-error">Username is required</p>
    } @if(form.invalid && form.dirty &&
    form.controls.username.hasError('minlength')){
    <p class="control-error">Username needs to have at least 3 characters</p>
    }
  </div>
  <div formGroupName="passwords">
    <div class="control">
      <label for="password">Password</label>
      <input
        id="password"
        type="password"
        name="password"
        formControlName="password"
        autocomplete="new-password"
      />
      <label for="password">
        Password
        <p>min. 6 characters and one number</p>
      </label>
      @if(form.controls.passwords.controls.password.invalid &&
      form.controls.passwords.controls.password.dirty &&
      form.controls.passwords.controls.password.hasError('required')){
      <p class="control-error">Password is required</p>
      } @if(form.invalid && form.dirty &&
      form.controls.passwords.controls.password.hasError('minlength')){
      <p class="control-error">Password needs to have at least 6 characters</p>
      } @if(form.invalid && form.dirty &&
      form.controls.passwords.controls.password.hasError('pattern')){
      <p class="control-error">Password needs to have at least 1 digit</p>
      }
    </div>

    <div class="control">
      <label for="confirm-password">
        Confirm Password
        <p>min. 6 characters and one number</p>
      </label>
      <input
        id="confirm-password"
        type="password"
        name="confirm-password"
        formControlName="confirmPassword"
        autocomplete="new-password"
      />
      @if(form.invalid && form.dirty &&
      form.controls.passwords.hasError('valuesNotEqual')){
      <p class="control-error">Passwords does not match</p>
      }
    </div>
  </div>
  @if(messageFailure){
  <p class="control-error">
    {{ messageFailure }}
  </p>
  } @if(messageSuccess){
  <p class="control-success">
    {{ messageSuccess }}
  </p>
  }
  <p class="form-actions">
    <button type="submit" class="button">Register</button>
  </p>
</form>
